# **************************************************************************** #
#                                                                              #
#                                                         ::::::::             #
#    Makefile                                           :+:    :+:             #
#                                                      +:+                     #
#    By: nhariman <nhariman@student.codam.nl>         +#+                      #
#                                                    +#+                       #
#    Created: 2020/10/09 00:43:23 by nhariman      #+#    #+#                  #
#    Updated: 2020/10/09 02:35:42 by nhariman      ########   odam.nl          #
#                                                                              #
# **************************************************************************** #

COMPILE = gcc

FLAGS = -Wall -Werror -Wextra

NASM =	ft_read.s \
		ft_strcmp.s \
		ft_strcpy.s \
		ft_strdup.s \
		ft_strlen.s \
		ft_write.s

MAIN =	main.c \
		test_read.c \
		test_strcmp.c \
		test_strcpy.c \
		test_strdup.c \
		test_strlen.c \
		test_write.c

CBONUS =

ONASM = 	$(NASM:.s=.o)

OMAIN =		$(MAIN:.s=.o)

OBONUS = 	$(CBONUS:.c=.o)

NAME = libasm.a

read: $(NAME)
	@echo "compile library with test_read.c"
	$(COMPILE) -c $(FLAGS) -L. -lasm test_read.c

all: $(NAME)

$(NAME): $(ONASM)
	ar rcs $@ $^
	$(COMPILE) -c $(FLAGS) -L. -lasm $(MAIN)

%.o: %.s
	nasm -fmacho64 $<
	$(COMPILE) -c $(FLAGS) -o $@  %.c

clean:
	@$(RM) $(ONASM)

fclean: clean
	@$(RM) $(NAME)

re: fclean all

bonus:
	@echo "sorry nothing here"
